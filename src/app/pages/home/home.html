<div class="home-page" >
  <!-- ======================= -->
  <!--    قسم البانر الرئيسي    -->
  <!-- ======================= -->
  <section class="hero-section">
  <swiper-container
    autoplay-delay="3000"
    loop="true"
    pagination="true"
    effect="fade"
    class="hero-swiper">

    <!-- الصورة الأولى -->
    <swiper-slide>
      <div class="hero-slide-content" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imegs/مصنع-نضيد-الوشم-للتمور-19-1.jpg');">
        <div class="container">
          <div class="hero-text">
            <h1>مرحباً بك في نضيد الوشم</h1>
            <p>من تمور المشرق الفاخرة وشتلاتها المميزة، نرحب بك في عالم التمور الاستثنائية.</p>
            <a [routerLink]="['/products']" class="btn btn-secondary btn-lg">تصفح منتجاتنا</a>
          </div>
        </div>
      </div>
    </swiper-slide>

    <!-- الصورة الثانية -->
    <swiper-slide>
      <div class="hero-slide-content" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imegs/مصنع-نضيد-الوشم-للتمور-17.jpg');">
        <div class="container">
          <div class="hero-text">
            <h1>جودة لا تضاهى</h1>
            <p>نختار لك أفضل أنواع التمور بعناية فائقة لنضمن لك تجربة فريدة وطعم لا ينسى.</p>
            <a [routerLink]="['/products']" class="btn btn-secondary btn-lg">اكتشف المزيد</a>
          </div>
        </div>
      </div>
    </swiper-slide>

    <!-- الصورة الثالثة -->
    <swiper-slide>
      <div class="hero-slide-content" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('imegs/نضيد الوشم اسليد.jpg');">
        <div class="container">
          <div class="hero-text">
            <h1>شتلات مميزة</h1>
            <p>نوفر لك أفضل أنواع الشتلات لزراعة مستدامة وإنتاج وفير من أجود أنواع النخيل.</p>
            <a [routerLink]="['/products']" class="btn btn-secondary btn-lg">تسوق الآن</a>
          </div>
        </div>
      </div>
    </swiper-slide>

  </swiper-container>
</section>


  <!-- ======================= -->
  <!--      قسم الفئات        -->
  <!-- ======================= -->
  <section class="categories-section-wrapper">
    <div class="container">
      <header class="section-header-alt">
        <h2 class="section-title-alt">الأقسام الرئيسية</h2>
        <p class="section-subtitle-alt">اكتشف تنوع منتجاتنا عبر أقسامنا المختارة بعناية</p>
      </header>
      <div class="categories-grid">
        <a class="category-card" routerLink="/Rawdates">
          <img src="imegs/تمور خام.png" alt="تمور خام">
          <h3>تمور خام</h3>
        </a>
        <a class="category-card" routerLink="/maknoozautomaticdates">
          <img src="imegs/تمور مكنوز الي.png" alt="تمور مكنوز الي">
          <h3>تمور مكنوز الي</h3>
        </a>
        <a class="category-card" routerLink="/Surveydatesprose">
          <img src="imegs/تمور تعبئة نثري.png" alt="تمور تعبئة نثري">
          <h3>تمور تعبئة نثري</h3>
        </a>
        <a class="category-card" routerLink="/Maamoul">
          <img src="imegs/معمول.png" alt="المعمول">
          <h3>المعمول</h3>
        </a>
      </div>
    </div>
  </section>

  <!-- ================================================== -->
  <!--   أقسام المنتجات مع سلايدر لكل قسم             -->
  <!-- ================================================== -->
  <div class="multi-slider-container">
    <div *ngIf="isLoading" class="loading-state"><div class="spinner"></div></div>

    <ng-container *ngIf="!isLoading">
      <!-- استخدام ng-container لتجنب div إضافي -->
      <section *ngFor="let section of sections; let isOdd = odd"
               class="category-slider-section"
               [class.odd-section]="isOdd">
        <div class="container">
          <header class="section-header">
            <h2 class="section-title">{{ section.name }}</h2>
            <a [routerLink]="['/products']" [queryParams]="{ category: section.id }" class="view-all-link">
              عرض الكل <i class="fas fa-long-arrow-alt-left"></i>
            </a>
          </header>

          <div
  *ngIf="section.products.length >= 8"
  class="slider-wrapper">

  <swiper-container
    [slidesPerView]="4"
    [spaceBetween]="20"
    [navigation]="true"
    [pagination]="{ clickable: true }"
    [loop]="true"
    autoplay-delay="1000"
    [speed]="800"
    [autoplay]="{
      delay: 1000,
      disableOnInteraction: false
    }"
    [breakpoints]="{
      '320': { slidesPerView: 2 },
      '768': { slidesPerView: 3 },
      '1024': { slidesPerView: 4 }
    }">

        <!-- الشرائح (لا تغيير هنا) -->
        <swiper-slide *ngFor="let product of section.products">
          <div class="product-card">
            <div class="product-image-wrapper">
              <img [src]="getProductImage(product)" class="product-image" [alt]="product.name">
              <div class="product-overlay">
                <a [routerLink]="['/products', product.id]" class="overlay-action details-btn"><i class="fas fa-eye"></i></a>
                <button class="overlay-action add-to-cart-btn" (click)="addToCart(product)"><i class="fas fa-shopping-basket"></i></button>
              </div>
            </div>
            <div class="product-info">
              <h3 class="product-name">{{ product.name}}</h3>
              <div class="product-price" *ngIf="product?.price">
                {{ product.price}}
                <svg class="riyal-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1124.14 1256.39" width="16" height="18" style="display:inline-block;vertical-align:-0.125em">
                <path fill="currentColor" d="M699.62,1113.02h0c-20.06,44.48-33.32,92.75-38.4,143.37l424.51-90.24c20.06-44.47,33.31-92.75,38.4-143.37l-424.51,90.24Z"></path>
                <path fill="currentColor" d="M1085.73,895.8c20.06-44.47,33.32-92.75,38.4-143.37l-330.68,70.33v-135.2l292.27-62.11c20.06-44.47,33.32-92.75,38.4-143.37l-330.68,70.27V66.13c-50.67,28.45-95.67,66.32-132.25,110.99v403.35l-132.25,28.11V0c-50.67,28.44-95.67,66.32-132.25,110.99v525.69l-295.91,62.88c-20.06,44.47-33.33,92.75-38.42,143.37l334.33-71.05v170.26l-358.3,76.14c-20.06,44.47-33.32,92.75-38.4,143.37l375.04-79.7c30.53-6.35,56.77-24.4,73.83-49.24l68.78-101.97v-.02c7.14-10.55,11.3-23.27,11.3-36.97v-149.98l132.25-28.11v270.4l424.53-90.28Z"></path>
                </svg>

              </div>
            </div>
            <button class="mobile-add-to-cart" (click)="addToCart(product)"><i class="fas fa-cart-plus"></i> أضف للسلة</button>
          </div>
        </swiper-slide>

      </swiper-container>
          </div>

          <!-- home.html (الكود الصحيح بعد التعديل) -->

          <div class="view-all-button-wrapper">
            <!-- استخدام section.path بدلاً من المسار الثابت والـ queryParams -->
            <a [routerLink]="[section.path]" class="btn btn-view-all">
              <span>عرض كل منتجات قسم {{ section.name }}</span>
              <i class="fas fa-long-arrow-alt-left"></i>
            </a>
          </div>

        </div>
      </section>
    </ng-container>
  </div>

  <!-- ======================= -->
  <!--      قسم المميزات       -->
  <!-- ======================= -->
  <section class="features-section-wrapper">
    <div class="container">
      <div class="row text-center">
        <div class="col-md-4 feature-item">
          <i class="fas fa-leaf fa-3x mb-3"></i>
          <h3>جودة طبيعية</h3>
          <p>أجود أنواع التمور الطبيعية والمختارة بعناية فائقة.</p>
        </div>
        <div class="col-md-4 feature-item">
          <i class="fas fa-shipping-fast fa-3x mb-3"></i>
          <h3>توصيل سريع</h3>
          <p>خدمة توصيل سريعة وموثوقة لجميع أنحاء المملكة.</p>
        </div>
        <div class="col-md-4 feature-item">
          <i class="fas fa-award fa-3x mb-3"></i>
          <h3>ضمان الرضا</h3>
          <p>نضمن لك أعلى مستويات الجودة أو استرداد أموالك.</p>
        </div>
      </div>
    </div>
  </section>
</div>

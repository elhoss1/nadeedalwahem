<!-- حالة التحميل -->
<div *ngIf="isLoading" class="loading-state">
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <p>جاري تأكيد طلبك...</p>
</div>

<!-- بطاقة التأكيد (تظهر فقط بعد انتهاء التحميل) -->
<div *ngIf="!isLoading" class="confirmation-card">

  <!-- حالة النجاح (تظهر فقط إذا نجح الطلب وهناك بيانات) -->
  <div *ngIf="isSuccess && order" class="success-state">
    <div class="icon-wrapper">
      <i class="bi bi-patch-check-fill icon"></i>
    </div>
    <h1>شكراً لك، طلبك مؤكد!</h1>
    <p class="message">
      تم استلام طلبك بنجاح. رقم طلبك هو <strong>#{{ order.id }}</strong>
    </p>

    <!-- ملخص الطلب -->
    <div class="order-summary">
      <h4>ملخص الطلب</h4>
      <ul *ngIf="order.line_items" class="list-group">
        <li *ngFor="let item of order.line_items" class="list-group-item">
          <span class="item-details">{{ item.name }} (x{{ item.quantity }})</span>
          <span class="item-price">{{ item.total | currency:'SAR' }}</span>
        </li>
        <li class="list-group-item total-row">
          <span>الإجمالي</span>
          <span>{{ order.total | currency:'SAR' }}</span>
        </li>
      </ul>
    </div>

    <!-- الأزرار -->
    <div class="actions">
      <a routerLink="/my-account/orders" class="btn btn-primary">متابعة حالة الطلب</a>
      <a routerLink="/" class="btn btn-secondary">مواصلة التسوق</a>
    </div>
  </div>

  <!-- حالة الفشل (تظهر فقط إذا فشل الطلب) -->
  <div *ngIf="!isSuccess" class="error-state">
    <div class="icon-wrapper">
      <i class="bi bi-x-octagon-fill icon"></i>
    </div>
    <h1>حدث خطأ ما</h1>
    <p class="message" *ngIf="error">
      {{ error }}
    </p>
    <div class="actions">
      <a routerLink="/checkout" class="btn btn-primary">المحاولة مرة أخرى</a>
    </div>
  </div>

</div>
